/*! 
 Build based on gin-vue-admin 
 Time : 1707920194000 */
import{v as e,_ as a,a as o,m as s,o as t,c as l,d as r,w as n,g as i,k as p,E as u}from"./087AC4D233B64EB0index.js";import{E as d}from"./087AC4D233B64EB0upload2.js";import"./087AC4D233B64EB0progress.js";/* empty css                      */import{I as c,i as m,a as f}from"./087AC4D233B64EB0image.js";const g=a=>e({url:"/fileUploadAndDownload/getFileList",method:"post",data:a}),v=a=>e({url:"/fileUploadAndDownload/deleteFile",method:"post",data:a}),y=a=>e({url:"/fileUploadAndDownload/editFileName",method:"post",data:a}),B=a(Object.assign({name:"UploadImage"},{__name:"image",props:{imageUrl:{type:String,default:""},fileSize:{type:Number,default:2048},maxWH:{type:Number,default:1920}},emits:["on-success"],setup(e,{emit:a}){const m=a,f=e,g=o("/api");s();const v=e=>{const a="image/jpeg"===e.type,o="image/png"===e.type;if(!a&&!o)return p.error("上传头像图片只能是 jpg或png 格式!"),!1;const s=e.size/1024<f.fileSize;if(!s){return new c(e,f.fileSize,f.maxWH).compress()}return s},y=e=>{const{data:a}=e;a.file&&m("on-success",a.file.url)};return(e,a)=>{const o=u,s=d;return t(),l("div",null,[r(s,{action:"".concat(g.value,"/fileUploadAndDownload/upload"),"show-file-list":!1,"on-success":y,"before-upload":v,multiple:!1},{default:n((()=>[r(o,{type:"primary"},{default:n((()=>[i("压缩上传")])),_:1})])),_:1},8,["action"])])}}}),[["__scopeId","data-v-c8888ef3"]]),_=Object.assign({name:"UploadCommon"},{__name:"common",emits:["on-success"],setup(e,{emit:a}){const c=a,g=o("/api");s();const v=o(!1),y=e=>{v.value=!0;const a=e.size/1024/1024<.5,o=e.size/1024/1024<5,s=m(e.type),t=f(e.type);let l=!0;return s||t||(p.error("上传图片只能是 jpg,png,svg,webp 格式, 上传视频只能是 mp4,webm 格式!"),v.value=!1,l=!1),!o&&s&&(p.error("上传视频大小不能超过 5MB"),v.value=!1,l=!1),!a&&t&&(p.error("未压缩的上传图片大小不能超过 500KB，请使用压缩上传"),v.value=!1,l=!1),console.log("upload file check result: ",l),l},B=e=>{const{data:a}=e;a.file&&c("on-success",a.file.url)},_=()=>{p({type:"error",message:"上传失败"}),v.value=!1};return(e,a)=>{const o=u,s=d;return t(),l("div",null,[r(s,{action:"".concat(g.value,"/fileUploadAndDownload/upload"),"before-upload":y,"on-error":_,"on-success":B,"show-file-list":!1,class:"upload-btn"},{default:n((()=>[r(o,{type:"primary"},{default:n((()=>[i("普通上传")])),_:1})])),_:1},8,["action"])])}}});export{B as U,_,v as d,y as e,g};
